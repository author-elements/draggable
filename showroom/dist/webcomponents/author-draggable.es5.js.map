{"version":3,"file":"author-draggable.es5.js","sources":["../src/element.js"],"sourcesContent":["class AuthorDraggableElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineAttributes({\n      direction: {\n        default: null\n      },\n\n      disabled: {\n        default: false\n      },\n\n      free: {\n        default: false\n      },\n\n      'max-drag-distance': {\n        default: null\n      },\n\n      'min-drag-distance': {\n        default: null\n      },\n\n      type: {\n        default: null\n      },\n    })\n\n    this.UTIL.defineProperties({\n      acceptedConstraintKeys: {\n        private: true,\n        readonly: true,\n        default: [\n          'x',\n          'y',\n          'up',\n          'right',\n          'down',\n          'left'\n        ]\n      },\n\n      canDrop: {\n        private: true,\n        default: false\n      },\n\n      clone: {\n        private: true,\n        default: null\n      },\n\n      constraints: {\n        private: true,\n        readonly: true,\n        get: () => {\n          if (!this.direction) {\n            return null\n          }\n\n          return this.direction.replace(/\\s+/g,' ').trim().split(' ')\n        }\n      },\n\n      data: {\n        default: null\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      dragArea: {\n        private: true,\n        readonly: true,\n        get: () => {\n          let dragAreas = document.querySelectorAll('author-dragarea')\n\n          for (let dragArea of dragAreas) {\n            if (dragArea.contains(this)) {\n              return dragArea\n            }\n          }\n\n          return document.body\n        }\n      },\n\n      dragIsActive: {\n        private: true,\n        default: false\n      },\n\n      dropTargets: {\n        private: true,\n        default: null\n      },\n\n      initialPosition: {\n        private: true,\n        default: null\n      },\n\n      initialTimestamp: {\n        private: true,\n        default: null\n      },\n\n      pointerEventsSupported: {\n        private: true,\n        readonly: true,\n        default: window.PointerEvent === undefined ? false : true\n      },\n\n      pointerOffset: {\n        private: true,\n        default: null\n      },\n\n      userIsTouching: {\n        private: true,\n        default: false\n      },\n\n      types: {\n        private: true,\n        readonly: true,\n        get: () => {\n          if (!this.type) {\n            return null\n          }\n\n          return this.type.replace(/\\s+/g,' ').trim().split(' ')\n        }\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      forwardEvent: (evt, newEvtName, detail = {}, target = this) => {\n        evt.preventDefault()\n\n        detail.originalEvent = evt\n\n        if (!this.PRIVATE.pointerEventsSupported) {\n          this.emit({\n            name: newEvtName,\n            detail,\n            target\n          })\n        }\n      },\n\n      // Polyfill for Firefox bug from 2002 :|\n      // window.getComputedStyle(el).cssText returns \"\"\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n      getComputedStylesCssText: element => {\n        let computed = window.getComputedStyle(element)\n        let acc = []\n\n        if (computed.cssText !== '') {\n          return computed.cssText\n        }\n\n        for (let property in computed) {\n          if (typeof computed[property] === 'string') {\n            acc.push(`${property}: ${computed[property]}`)\n          }\n        }\n\n        return acc.join('; ')\n      },\n\n      handshakeAcceptedHandler: evt => {\n        let { dropTarget } = evt.detail\n\n        this.PRIVATE.dropTargets.push(dropTarget)\n        dropTarget.on('drop.allow', evt => this.PRIVATE.canDrop = true)\n        dropTarget.on('drop.deny', evt => this.PRIVATE.canDrop = false)\n      },\n\n      initializeClone: () => {\n        this.setAttribute('dragging', '')\n\n        this.PRIVATE.clone = this.cloneNode(true)\n        this.PRIVATE.synchronizeStyles()\n        this.PRIVATE.clone.sourceElement = this\n\n        this.removeAttribute('dragging')\n        this.PRIVATE.clone.setAttribute('clone', '')\n\n        document.body.appendChild(this.PRIVATE.clone)\n      },\n\n      pointerupHandler: evt => {\n        this.emit({\n          name: 'drag.end',\n          detail: this.PRIVATE.getEventData(evt, {\n            drag: {\n              distance: this.PRIVATE.getDragDistance(evt),\n              duration: evt.timeStamp - this.PRIVATE.initialTimestamp\n            },\n            position: this.PRIVATE.getPointerPosition(evt, false)\n          })\n        })\n\n        this.PRIVATE.reset()\n      },\n\n      mouseupHandler: evt => {\n        this.PRIVATE.forwardEvent(evt, 'pointerup', {}, document.body)\n      },\n\n      touchendHandler: evt => {\n        // document.removeEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n      },\n\n      applyBodyListeners: () => {\n        document.body.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n        document.body.addEventListener('mouseup', this.PRIVATE.mouseupHandler)\n        document.body.addEventListener('touchend', this.PRIVATE.touchendHandler)\n      },\n\n      removeBodyListeners: () => {\n        document.body.removeEventListener('pointerup', this.PRIVATE.pointerupHandler)\n        document.body.removeEventListener('mouseup', this.PRIVATE.mouseupHandler)\n        document.body.removeEventListener('touchend', this.PRIVATE.touchendHandler)\n        document.body.removeEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n      },\n\n      initiateDrag: () => {\n        this.PRIVATE.applyBodyListeners()\n\n        this.setAttribute(this.free ? 'dragging' : 'ghost', '')\n        this.PRIVATE.dragIsActive = true\n        // this.emit(new CustomEvent('after.drag.start', this.PRIVATE.getEventData(evt, {\n        //\n        // })))\n      },\n\n      getRelativePointerPosition: (relWidth, relHeight, left, top) => {\n        let right = relWidth - left\n        let bottom = relHeight - top\n\n        return {\n          x: left,\n          y: top,\n\n          top: {\n            px: top,\n            pct: this.UTIL.getPercentageDecimal(top, relHeight)\n          },\n\n          right: {\n            px: right,\n            pct: this.UTIL.getPercentageDecimal(right, relWidth)\n          },\n\n          bottom: {\n            px: bottom,\n            pct: this.UTIL.getPercentageDecimal(bottom, relHeight)\n          },\n\n          left: {\n            px: left,\n            pct: this.UTIL.getPercentageDecimal(left, relWidth)\n          }\n        }\n      },\n\n      getPercentageDecimal: (portion, whole, decimalPlaces = null) => {\n        let decimal = portion / whole\n\n        if (decimal < 0) {\n          return 0\n        }\n\n        if (decimalPlaces !== null) {\n          return decimal.toFixed(decimalPlaces)\n        }\n\n        return decimal\n      },\n\n      getPointerPosition: (evt, offset = true, client = true, doc = true,) => {\n        let obj = {}\n\n        if (offset) {\n          obj.offset = this.PRIVATE.getRelativePointerPosition(this.offsetWidth, this.offsetHeight, evt.offsetX, evt.offsetY)\n        }\n\n        if (client) {\n          obj.client = this.PRIVATE.getRelativePointerPosition(document.documentElement.clientWidth, document.documentElement.clientHeight, evt.clientX, evt.clientY)\n        }\n\n        if (doc) {\n          obj.document = this.PRIVATE.getRelativePointerPosition(document.documentElement.scrollWidth, document.documentElement.scrollHeight, evt.pageX, evt.pageY)\n        }\n\n        return obj\n      },\n\n      getEventData: (evt, props = {}) => {\n        let config = {\n          cancelable: true,\n          composed: true,\n\n          detail: Object.assign({}, {\n            altKey: evt.altKey,\n            ctrlKey: evt.ctrlKey,\n            metaKey: evt.metaKey,\n            shiftKey: evt.shiftKey,\n            types: this.PRIVATE.types\n          }, props)\n        }\n\n        Object.defineProperty(config.detail, 'data', {\n          set: value => this.data = value,\n          get: () => this.data\n        })\n\n        return config\n      },\n\n      pointerMoveHandler: evt => {\n        if (!this.PRIVATE.dragIsActive) {\n          if (!this.free) {\n            this.PRIVATE.initializeClone()\n          }\n\n          let dragstartEvent = this.emit({\n            name: 'drag.start',\n            detail: this.PRIVATE.getEventData(evt, {\n              position: this.PRIVATE.getPointerPosition(evt)\n            })\n          })\n\n          if (dragstartEvent.defaultPrevented) {\n            return\n          }\n\n          this.PRIVATE.initiateDrag()\n        }\n\n        let dragEvent = this.emit({\n          name: 'drag',\n          detail: this.PRIVATE.getEventData(evt, {\n            canDrop: this.PRIVATE.canDrop,\n            drag: {\n              distance: this.PRIVATE.getDragDistance(evt),\n              duration: evt.timeStamp - this.PRIVATE.initialTimestamp\n            },\n            position: this.PRIVATE.getPointerPosition(evt, false)\n          })\n        })\n\n        if (dragEvent.defaultPrevented) {\n          return\n        }\n\n        this.PRIVATE.updatePosition(evt)\n      },\n\n      getDragDistance: evt => ({\n        x: Math.abs(this.PRIVATE.initialPosition.x - evt.pageX),\n        y: Math.abs(this.PRIVATE.initialPosition.y - evt.pageY)\n      }),\n\n      reset: () => {\n        if (this.free) {\n          this.removeAttribute('dragging')\n        } else {\n          this.removeAttribute('ghost')\n\n          if (this.PRIVATE.clone !== null) {\n            document.body.removeChild(this.PRIVATE.clone)\n            this.PRIVATE.clone = null\n          }\n        }\n\n        this.PRIVATE.dragIsActive = false\n        this.PRIVATE.pointerOffset = null\n        this.PRIVATE.removeBodyListeners()\n        this.PRIVATE.dropTargets = null\n        this.PRIVATE.initialPosition = null\n        this.PRIVATE.initialTimestamp = null\n      },\n\n      storeDropTargets: () => {\n        this.PRIVATE.dropTargets = []\n        let allDropTargets = document.querySelectorAll('author-droptarget')\n\n        this.on('handshake.accepted', this.PRIVATE.handshakeAcceptedHandler)\n\n        for (let dropTarget of allDropTargets) {\n          this.emit({\n            name: 'handshake.offered',\n            detail: {\n              draggable: this,\n              types: this.PRIVATE.types\n            },\n\n            target: dropTarget\n          })\n        }\n\n        this.off('handshake.accepted', this.PRIVATE.handshakeHandler)\n      },\n\n      synchronizeStyles: () => {\n        let { clone, getComputedStylesCssText } = this.PRIVATE\n\n        clone.style.cssText = getComputedStylesCssText(this)\n\n        let children = this.getElementsByTagName('*')\n        let cloneChildren = clone.getElementsByTagName('*')\n\n        if (children.length > 0) {\n          for (let i = 0; i < children.length; i++) {\n            cloneChildren[i].style.cssText = getComputedStylesCssText(children[i])\n          }\n        }\n      },\n\n      updatePosition: evt => {\n        let { clone, dimensions, originalCoordinates, pointerOffset } = this.PRIVATE\n        let newCoordinates = {\n          x: evt.clientX - pointerOffset.x,\n          y: evt.clientY - pointerOffset.y\n        }\n\n        if (this.free) {\n          newCoordinates = {\n            x: newCoordinates.x - (originalCoordinates.x - window.scrollX),\n            y: newCoordinates.y - (originalCoordinates.y - window.scrollY)\n          }\n\n          return this.UTIL.setStyleProperty('dragging', 'transform', `translate(${newCoordinates.x}px, ${newCoordinates.y}px)`)\n        }\n\n        clone.UTIL.setStyleProperties('dragging', [\n          {\n            name: 'left',\n            value: `${newCoordinates.x}px`,\n            important: true\n          },\n          {\n            name: 'top',\n            value: `${newCoordinates.y}px`,\n            important: true\n          }\n        ])\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.changed': evt => {\n        let { attribute, newValue, oldValue } = evt.detail\n\n        switch (attribute) {\n          case 'free':\n            if (!this.free) {\n              this.UTIL.removeStyleProperty('dragging', 'transform')\n            }\n            break\n        }\n      },\n\n      connected: () => {\n        this.UTIL.insertStyleRule('dragging', ':host {}')\n\n        this.emit({\n          name: 'author-draggable.connected',\n          detail: {\n            draggable: this\n          },\n\n          target: window\n        })\n      },\n\n      mousedown: evt => {\n        if (this.PRIVATE.userIsTouching) {\n          return evt.preventDefault()\n        }\n\n        this.PRIVATE.forwardEvent(evt, 'pointerdown')\n      },\n\n      touchstart: evt => {\n        evt.preventDefault()\n        this.PRIVATE.userIsTouching = true\n        this.PRIVATE.forwardEvent(evt, 'pointerdown')\n      },\n\n      pointerup: evt => {\n        this.PRIVATE.reset()\n      },\n\n      pointerdown: evt => {\n        let client = {}\n\n        this.PRIVATE.initialTimestamp = evt.timeStamp\n\n        if (evt instanceof CustomEvent) {\n          client.x = evt.detail.originalEvent.clientX\n          client.y = evt.detail.originalEvent.clientY\n        } else {\n          client.x = evt.clientX\n          client.y = evt.clientY\n        }\n\n        this.PRIVATE.initialPosition = {\n          x: client.x,\n          y: client.y\n        }\n\n        this.PRIVATE.pointerOffset = {\n          x: client.x - this.PRIVATE.dimensions.left,\n          y: client.y - this.PRIVATE.dimensions.top\n        }\n\n        document.body.addEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n        this.PRIVATE.storeDropTargets()\n      },\n\n      rendered: () => {\n        this.UTIL.defineProperty('originalCoordinates', {\n          private: true,\n          readonly: true,\n          default: {\n            x: this.PRIVATE.dimensions.left + window.scrollX,\n            y: this.PRIVATE.dimensions.top + window.scrollY\n          }\n        })\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['direction', 'disabled', 'free', 'min-drag-distance', 'max-drag-distance', 'type']\n  }\n}\n\ncustomElements.define('author-draggable', AuthorDraggableElement)\n\nexport default AuthorDraggableElement\n"],"names":["AuthorDraggableElement","UTIL","defineAttributes","direction","default","disabled","free","type","defineProperties","acceptedConstraintKeys","private","readonly","canDrop","clone","constraints","get","replace","trim","split","data","dimensions","getBoundingClientRect","dragArea","dragAreas","document","querySelectorAll","contains","body","dragIsActive","dropTargets","initialPosition","initialTimestamp","pointerEventsSupported","window","PointerEvent","undefined","pointerOffset","userIsTouching","types","definePrivateMethods","forwardEvent","evt","newEvtName","detail","target","preventDefault","originalEvent","PRIVATE","emit","name","getComputedStylesCssText","element","computed","getComputedStyle","acc","cssText","property","push","join","handshakeAcceptedHandler","dropTarget","on","initializeClone","setAttribute","cloneNode","synchronizeStyles","sourceElement","removeAttribute","appendChild","pointerupHandler","getEventData","drag","distance","getDragDistance","duration","timeStamp","position","getPointerPosition","reset","mouseupHandler","touchendHandler","applyBodyListeners","addEventListener","removeBodyListeners","removeEventListener","pointerMoveHandler","initiateDrag","getRelativePointerPosition","relWidth","relHeight","left","top","right","bottom","x","y","px","pct","getPercentageDecimal","portion","whole","decimalPlaces","decimal","toFixed","offset","client","doc","obj","offsetWidth","offsetHeight","offsetX","offsetY","documentElement","clientWidth","clientHeight","clientX","clientY","scrollWidth","scrollHeight","pageX","pageY","props","config","cancelable","composed","Object","assign","altKey","ctrlKey","metaKey","shiftKey","defineProperty","set","value","dragstartEvent","defaultPrevented","dragEvent","updatePosition","Math","abs","removeChild","storeDropTargets","allDropTargets","draggable","off","handshakeHandler","style","children","getElementsByTagName","cloneChildren","length","i","originalCoordinates","newCoordinates","scrollX","scrollY","setStyleProperty","setStyleProperties","important","registerListeners","attribute","newValue","oldValue","removeStyleProperty","connected","insertStyleRule","mousedown","touchstart","pointerup","pointerdown","CustomEvent","rendered","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":"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"}