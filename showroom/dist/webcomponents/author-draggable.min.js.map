{"version":3,"file":"author-draggable.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorDraggableElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineAttributes({\n      direction: {\n        default: null\n      },\n\n      disabled: {\n        default: false\n      },\n\n      free: {\n        default: false\n      },\n\n      'max-drag-distance': {\n        default: null\n      },\n\n      'min-drag-distance': {\n        default: null\n      },\n\n      type: {\n        default: null\n      },\n    })\n\n    this.UTIL.defineProperties({\n      acceptedConstraintKeys: {\n        private: true,\n        readonly: true,\n        default: [\n          'x',\n          'y',\n          'up',\n          'right',\n          'down',\n          'left'\n        ]\n      },\n\n      canDrop: {\n        private: true,\n        default: false\n      },\n\n      clone: {\n        private: true,\n        default: null\n      },\n\n      constraints: {\n        private: true,\n        readonly: true,\n        get: () => {\n          if (!this.direction) {\n            return null\n          }\n\n          return this.direction.replace(/\\s+/g,' ').trim().split(' ')\n        }\n      },\n\n      data: {\n        default: null\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      dragArea: {\n        private: true,\n        readonly: true,\n        get: () => {\n          let dragAreas = document.querySelectorAll('author-dragarea')\n\n          for (let dragArea of dragAreas) {\n            if (dragArea.contains(this)) {\n              return dragArea\n            }\n          }\n\n          return document.body\n        }\n      },\n\n      dragIsActive: {\n        private: true,\n        default: false\n      },\n\n      dropTargets: {\n        private: true,\n        default: null\n      },\n\n      initialPosition: {\n        private: true,\n        default: null\n      },\n\n      initialTimestamp: {\n        private: true,\n        default: null\n      },\n\n      pointerEventsSupported: {\n        private: true,\n        readonly: true,\n        default: window.PointerEvent === undefined ? false : true\n      },\n\n      pointerOffset: {\n        private: true,\n        default: null\n      },\n\n      userIsTouching: {\n        private: true,\n        default: false\n      },\n\n      types: {\n        private: true,\n        readonly: true,\n        get: () => {\n          if (!this.type) {\n            return null\n          }\n\n          return this.type.replace(/\\s+/g,' ').trim().split(' ')\n        }\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      forwardEvent: (evt, newEvtName, detail = {}, target = this) => {\n        evt.preventDefault()\n\n        detail.originalEvent = evt\n\n        if (!this.PRIVATE.pointerEventsSupported) {\n          this.emit({\n            name: newEvtName,\n            detail,\n            target\n          })\n        }\n      },\n\n      // Polyfill for Firefox bug from 2002 :|\n      // window.getComputedStyle(el).cssText returns \"\"\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n      getComputedStylesCssText: element => {\n        let computed = window.getComputedStyle(element)\n        let acc = []\n\n        if (computed.cssText !== '') {\n          return computed.cssText\n        }\n\n        for (let property in computed) {\n          if (typeof computed[property] === 'string') {\n            acc.push(`${property}: ${computed[property]}`)\n          }\n        }\n\n        return acc.join('; ')\n      },\n\n      handshakeAcceptedHandler: evt => {\n        let { dropTarget } = evt.detail\n\n        this.PRIVATE.dropTargets.push(dropTarget)\n        dropTarget.on('drop.allow', evt => this.PRIVATE.canDrop = true)\n        dropTarget.on('drop.deny', evt => this.PRIVATE.canDrop = false)\n      },\n\n      initializeClone: () => {\n        this.setAttribute('dragging', '')\n\n        this.PRIVATE.clone = this.cloneNode(true)\n        this.PRIVATE.synchronizeStyles()\n        this.PRIVATE.clone.sourceElement = this\n\n        this.removeAttribute('dragging')\n        this.PRIVATE.clone.setAttribute('clone', '')\n\n        document.body.appendChild(this.PRIVATE.clone)\n      },\n\n      pointerupHandler: evt => {\n        this.emit({\n          name: 'drag.end',\n          detail: this.PRIVATE.getEventData(evt, {\n            drag: {\n              distance: this.PRIVATE.getDragDistance(evt),\n              duration: evt.timeStamp - this.PRIVATE.initialTimestamp\n            },\n            position: this.PRIVATE.getPointerPosition(evt, false)\n          })\n        })\n\n        this.PRIVATE.reset()\n      },\n\n      mouseupHandler: evt => {\n        this.PRIVATE.forwardEvent(evt, 'pointerup', {}, document.body)\n      },\n\n      touchendHandler: evt => {\n        // document.removeEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n      },\n\n      applyBodyListeners: () => {\n        document.body.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n        document.body.addEventListener('mouseup', this.PRIVATE.mouseupHandler)\n        document.body.addEventListener('touchend', this.PRIVATE.touchendHandler)\n      },\n\n      removeBodyListeners: () => {\n        document.body.removeEventListener('pointerup', this.PRIVATE.pointerupHandler)\n        document.body.removeEventListener('mouseup', this.PRIVATE.mouseupHandler)\n        document.body.removeEventListener('touchend', this.PRIVATE.touchendHandler)\n        document.body.removeEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n      },\n\n      initiateDrag: () => {\n        this.PRIVATE.applyBodyListeners()\n\n        this.setAttribute(this.free ? 'dragging' : 'ghost', '')\n        this.PRIVATE.dragIsActive = true\n        // this.emit(new CustomEvent('after.drag.start', this.PRIVATE.getEventData(evt, {\n        //\n        // })))\n      },\n\n      getRelativePointerPosition: (relWidth, relHeight, left, top) => {\n        let right = relWidth - left\n        let bottom = relHeight - top\n\n        return {\n          x: left,\n          y: top,\n\n          top: {\n            px: top,\n            pct: this.UTIL.getPercentageDecimal(top, relHeight)\n          },\n\n          right: {\n            px: right,\n            pct: this.UTIL.getPercentageDecimal(right, relWidth)\n          },\n\n          bottom: {\n            px: bottom,\n            pct: this.UTIL.getPercentageDecimal(bottom, relHeight)\n          },\n\n          left: {\n            px: left,\n            pct: this.UTIL.getPercentageDecimal(left, relWidth)\n          }\n        }\n      },\n\n      getPercentageDecimal: (portion, whole, decimalPlaces = null) => {\n        let decimal = portion / whole\n\n        if (decimal < 0) {\n          return 0\n        }\n\n        if (decimalPlaces !== null) {\n          return decimal.toFixed(decimalPlaces)\n        }\n\n        return decimal\n      },\n\n      getPointerPosition: (evt, offset = true, client = true, doc = true,) => {\n        let obj = {}\n\n        if (offset) {\n          obj.offset = this.PRIVATE.getRelativePointerPosition(this.offsetWidth, this.offsetHeight, evt.offsetX, evt.offsetY)\n        }\n\n        if (client) {\n          obj.client = this.PRIVATE.getRelativePointerPosition(document.documentElement.clientWidth, document.documentElement.clientHeight, evt.clientX, evt.clientY)\n        }\n\n        if (doc) {\n          obj.document = this.PRIVATE.getRelativePointerPosition(document.documentElement.scrollWidth, document.documentElement.scrollHeight, evt.pageX, evt.pageY)\n        }\n\n        return obj\n      },\n\n      getEventData: (evt, props = {}) => {\n        let config = {\n          cancelable: true,\n          composed: true,\n\n          detail: Object.assign({}, {\n            altKey: evt.altKey,\n            ctrlKey: evt.ctrlKey,\n            metaKey: evt.metaKey,\n            shiftKey: evt.shiftKey,\n            types: this.PRIVATE.types\n          }, props)\n        }\n\n        Object.defineProperty(config.detail, 'data', {\n          set: value => this.data = value,\n          get: () => this.data\n        })\n\n        return config\n      },\n\n      pointerMoveHandler: evt => {\n        if (!this.PRIVATE.dragIsActive) {\n          if (!this.free) {\n            this.PRIVATE.initializeClone()\n          }\n\n          let dragstartEvent = this.emit({\n            name: 'drag.start',\n            detail: this.PRIVATE.getEventData(evt, {\n              position: this.PRIVATE.getPointerPosition(evt)\n            })\n          })\n\n          if (dragstartEvent.defaultPrevented) {\n            return\n          }\n\n          this.PRIVATE.initiateDrag()\n        }\n\n        let dragEvent = this.emit({\n          name: 'drag',\n          detail: this.PRIVATE.getEventData(evt, {\n            canDrop: this.PRIVATE.canDrop,\n            drag: {\n              distance: this.PRIVATE.getDragDistance(evt),\n              duration: evt.timeStamp - this.PRIVATE.initialTimestamp\n            },\n            position: this.PRIVATE.getPointerPosition(evt, false)\n          })\n        })\n\n        if (dragEvent.defaultPrevented) {\n          return\n        }\n\n        this.PRIVATE.updatePosition(evt)\n      },\n\n      getDragDistance: evt => ({\n        x: Math.abs(this.PRIVATE.initialPosition.x - evt.pageX),\n        y: Math.abs(this.PRIVATE.initialPosition.y - evt.pageY)\n      }),\n\n      reset: () => {\n        if (this.free) {\n          this.removeAttribute('dragging')\n        } else {\n          this.removeAttribute('ghost')\n\n          if (this.PRIVATE.clone !== null) {\n            document.body.removeChild(this.PRIVATE.clone)\n            this.PRIVATE.clone = null\n          }\n        }\n\n        this.PRIVATE.dragIsActive = false\n        this.PRIVATE.pointerOffset = null\n        this.PRIVATE.removeBodyListeners()\n        this.PRIVATE.dropTargets = null\n        this.PRIVATE.initialPosition = null\n        this.PRIVATE.initialTimestamp = null\n      },\n\n      storeDropTargets: () => {\n        this.PRIVATE.dropTargets = []\n        let allDropTargets = document.querySelectorAll('author-droptarget')\n\n        this.on('handshake.accepted', this.PRIVATE.handshakeAcceptedHandler)\n\n        for (let dropTarget of allDropTargets) {\n          this.emit({\n            name: 'handshake.offered',\n            detail: {\n              draggable: this,\n              types: this.PRIVATE.types\n            },\n\n            target: dropTarget\n          })\n        }\n\n        this.off('handshake.accepted', this.PRIVATE.handshakeHandler)\n      },\n\n      synchronizeStyles: () => {\n        let { clone, getComputedStylesCssText } = this.PRIVATE\n\n        clone.style.cssText = getComputedStylesCssText(this)\n\n        let children = this.getElementsByTagName('*')\n        let cloneChildren = clone.getElementsByTagName('*')\n\n        if (children.length > 0) {\n          for (let i = 0; i < children.length; i++) {\n            cloneChildren[i].style.cssText = getComputedStylesCssText(children[i])\n          }\n        }\n      },\n\n      updatePosition: evt => {\n        let { clone, dimensions, originalCoordinates, pointerOffset } = this.PRIVATE\n        let newCoordinates = {\n          x: evt.clientX - pointerOffset.x,\n          y: evt.clientY - pointerOffset.y\n        }\n\n        if (this.free) {\n          newCoordinates = {\n            x: newCoordinates.x - (originalCoordinates.x - window.scrollX),\n            y: newCoordinates.y - (originalCoordinates.y - window.scrollY)\n          }\n\n          return this.UTIL.setStyleProperty('dragging', 'transform', `translate(${newCoordinates.x}px, ${newCoordinates.y}px)`)\n        }\n\n        clone.UTIL.setStyleProperties('dragging', [\n          {\n            name: 'left',\n            value: `${newCoordinates.x}px`,\n            important: true\n          },\n          {\n            name: 'top',\n            value: `${newCoordinates.y}px`,\n            important: true\n          }\n        ])\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.changed': evt => {\n        let { attribute, newValue, oldValue } = evt.detail\n\n        switch (attribute) {\n          case 'free':\n            if (!this.free) {\n              this.UTIL.removeStyleProperty('dragging', 'transform')\n            }\n            break\n        }\n      },\n\n      connected: () => {\n        this.UTIL.insertStyleRule('dragging', ':host {}')\n\n        this.emit({\n          name: 'author-draggable.connected',\n          detail: {\n            draggable: this\n          },\n\n          target: window\n        })\n      },\n\n      mousedown: evt => {\n        if (this.PRIVATE.userIsTouching) {\n          return evt.preventDefault()\n        }\n\n        this.PRIVATE.forwardEvent(evt, 'pointerdown')\n      },\n\n      touchstart: evt => {\n        evt.preventDefault()\n        this.PRIVATE.userIsTouching = true\n        this.PRIVATE.forwardEvent(evt, 'pointerdown')\n      },\n\n      pointerup: evt => {\n        this.PRIVATE.reset()\n      },\n\n      pointerdown: evt => {\n        let client = {}\n\n        this.PRIVATE.initialTimestamp = evt.timeStamp\n\n        if (evt instanceof CustomEvent) {\n          client.x = evt.detail.originalEvent.clientX\n          client.y = evt.detail.originalEvent.clientY\n        } else {\n          client.x = evt.clientX\n          client.y = evt.clientY\n        }\n\n        this.PRIVATE.initialPosition = {\n          x: client.x,\n          y: client.y\n        }\n\n        this.PRIVATE.pointerOffset = {\n          x: client.x - this.PRIVATE.dimensions.left,\n          y: client.y - this.PRIVATE.dimensions.top\n        }\n\n        document.body.addEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n        this.PRIVATE.storeDropTargets()\n      },\n\n      rendered: () => {\n        this.UTIL.defineProperty('originalCoordinates', {\n          private: true,\n          readonly: true,\n          default: {\n            x: this.PRIVATE.dimensions.left + window.scrollX,\n            y: this.PRIVATE.dimensions.top + window.scrollY\n          }\n        })\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['direction', 'disabled', 'free', 'min-drag-distance', 'max-drag-distance', 'type']\n  }\n}\n\ncustomElements.define('author-draggable', AuthorDraggableElement)\n\nexport default AuthorDraggableElement\n"],"names":["AuthorDraggableElement","AuthorBaseElement","HTMLElement","[object Object]","super","this","UTIL","defineAttributes","direction","default","disabled","free","max-drag-distance","min-drag-distance","type","defineProperties","acceptedConstraintKeys","private","readonly","canDrop","clone","constraints","get","replace","trim","split","data","dimensions","getBoundingClientRect","dragArea","dragAreas","document","querySelectorAll","contains","body","dragIsActive","dropTargets","initialPosition","initialTimestamp","pointerEventsSupported","undefined","window","PointerEvent","pointerOffset","userIsTouching","types","definePrivateMethods","forwardEvent","evt","newEvtName","detail","target","preventDefault","originalEvent","PRIVATE","emit","name","getComputedStylesCssText","element","computed","getComputedStyle","acc","cssText","property","push","join","handshakeAcceptedHandler","dropTarget","on","initializeClone","setAttribute","cloneNode","synchronizeStyles","sourceElement","removeAttribute","appendChild","pointerupHandler","getEventData","drag","distance","getDragDistance","duration","timeStamp","position","getPointerPosition","reset","mouseupHandler","touchendHandler","applyBodyListeners","addEventListener","removeBodyListeners","removeEventListener","pointerMoveHandler","initiateDrag","getRelativePointerPosition","relWidth","relHeight","left","top","right","bottom","x","y","px","pct","getPercentageDecimal","portion","whole","decimalPlaces","decimal","toFixed","offset","client","doc","obj","offsetWidth","offsetHeight","offsetX","offsetY","documentElement","clientWidth","clientHeight","clientX","clientY","scrollWidth","scrollHeight","pageX","pageY","props","config","cancelable","composed","Object","assign","altKey","ctrlKey","metaKey","shiftKey","defineProperty","set","value","defaultPrevented","updatePosition","Math","abs","removeChild","storeDropTargets","allDropTargets","draggable","off","handshakeHandler","style","children","getElementsByTagName","cloneChildren","length","i","originalCoordinates","newCoordinates","scrollX","scrollY","setStyleProperty","setStyleProperties","important","registerListeners","attribute.changed","attribute","newValue","oldValue","removeStyleProperty","connected","insertStyleRule","mousedown","touchstart","pointerup","pointerdown","CustomEvent","rendered","observedAttributes","customElements","define"],"mappings":"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"}